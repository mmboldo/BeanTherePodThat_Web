<!DOCTYPE html>
<html>
<title>Bean There Pod That- Project</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="{{ url_for('static', filename='css/first.css') }}">
<link href="https://fonts.googleapis.com/css2?family=Kristi&family=Quicksand:wght@300&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Reenie+Beanie&family=Shadows+Into+Light+Two&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
   <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.1.1/socket.io.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>


<body>

 <!--Navbar (sit on top) -->
<div class="w3-top">
  <div class="w3-bar w3-white w3-padding w3-card" style="letter-spacing:4px;">
    <a href="homePage" class="w3-bar-item w3-button" style="font-family: 'Reenie Beanie', cursive; color: white; margin-left: 240px; font-size: 40px">Bean There Pod That</a>
     <!--Right-sided navbar links. Hide them on small screens -->
    <div class="w3-right w3-hide-small">
      <a href="homePage" class="w3-bar-item w3-button">About Us</a>
      <a href="registration" class="w3-bar-item w3-button">Register</a>
      <a href="#contact" class="w3-bar-item w3-button">Contact</a>
    </div>
  </div>
</div>

 <!--Sidebar/menu -->
<nav class="w3-sidebar w3-bar-block w3-black w3-collapse w3-top" style="z-index:3;width:240px" id="mySidebar">
  <div class="w3-container w3-display-container w3-padding-16">
    <i onclick="w3_close()" class="fa fa-remove w3-hide-large w3-button w3-display-topright"></i>
    <img src="static/img/logoBTPTBrown.png" class="w3-round w3-image w3-opacity-min" style="margin-left:30px" alt="Logo" width="140" height="160">
  </div>
  <div class="w3-padding-64 w3-large w3-text-grey" style="letter-spacing: 5px">
    <a href="dashboard" class="w3-bar-item w3-button">Dashboard</a>
    <a href="login" class="w3-bar-item w3-button">Login</a>
    <a href="#" class="w3-bar-item w3-button">My Machines</a>
    <a href="addCoffee" class="w3-bar-item w3-button">Add a Coffee</a>
    <a href="#" class="w3-bar-item w3-button">My Profile</a>
  </div>
</nav>

 <!--Header -->
<header class="w3-display-container w3-content w3-wide w3-opacity-min" style="max-width:1600px;min-width:500px" id="home">
  
</header>

 <!--Page content -->
<div class="w3-container w3-padding-addCoffee w3-center" id="register" style="margin-left: 180px; margin-top: 65px; vertical-align:top;">
      <h1 style="font-family: 'Reenie Beanie', cursive; font-size: 35px;">Welcome {{session['firstName']}} to Bean There Pod That</h1>
      
        <div class="element">
          <p style="text-align:center; color:white">Check it out the most</br>recently opinions that other </p> 
          {% for lastOpinion in lastOpinions %} 
          <div class="w3-container" style="margin-top:20px; margin-left:20px; margin-right: 20px; margin-bottom:20px; background-color: #b3723b; color:black; border-radius:15px 15px 15px 15px; ">
            <p style="font-weight: bold; font-size:15px"> {{ lastOpinion['coffeeName'] }} </p>
            <p style="text-align: center; font-size:15px">{{ lastOpinion['coffeeOpinion'] }}" </p>
            {% if lastOpinion['rate'] == "5" %}
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
            {%endif%}
            {% if lastOpinion['rate'] == "4" %}
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
            {%endif%}
            {% if lastOpinion['rate'] == "3" %}
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
            {%endif%}
            {% if lastOpinion['rate'] == "2" %}
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
            {%endif%}
            {% if lastOpinion['rate'] == "1" %}
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
            {%endif%}
            <p style="text-align: right; font-size:15px"> {{ lastOpinion['firstName'] }} </p>
          </div>  
        {%endfor%} 
        </div>
        
         <div class="element" style="background:#233237">
          <p style="text-align:center; color:white">These are <strong>{{session['firstName']}}</strong>'s last</br>coffee opinions</p> 
          {% for myLastOpinion in myLastOpinions %} 
          <div class="w3-container" style="margin-top:20px; margin-left:20px; margin-right: 20px; margin-bottom:20px; background-color: #b3723b; color:black; border-radius:15px 15px 15px 15px; ">
            <p style="font-weight: bold; font-size:15px"> {{ myLastOpinion['coffeeName'] }} </p>
            <p style="text-align: center; font-size:15px">{{ myLastOpinion['coffeeOpinion'] }}" </p>
            {% if myLastOpinion['rate'] == "5" %}
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
            {%endif%}
            {% if myLastOpinion['rate'] == "4" %}
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
            {%endif%}
            {% if myLastOpinion['rate'] == "3" %}
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
            {%endif%}
            {% if myLastOpinion['rate'] == "2" %}
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
            {%endif%}
            {% if myLastOpinion['rate'] == "1" %}
              <span class="fa fa-star checked" style="color:orange; font-size:15px"></span>
            {%endif%}
            <p style="text-align: right; font-size:15px"> {{ myLastOpinion['firstName'] }} </p>
          </div>  
        {%endfor%} 
        </div>
        

    <script>
         

        $(document).ready(function() {
            let loc = window.location.href
        
            let socket = io(loc);
        
            socket.on('notification', function(value){
                $("#result").html(value)
            });
            
            
            $("#send_name").on('click', () => {
                let name = $('#username').val() ; // this gets the username entered by the user
                socket.emit('username',name) ;    // sends the username to the server
            })
            
            $("#send_private").on('click', () => {
                let to_name = $('#to').val() ; // this gets the name (receiver)
                let msg = $('#msg').val() ; 
                socket.emit('private_msg',{"to":to_name, "message": msg}) ;    // sends the username to the server
            })
            
            
        });
     </script>
    

        
  </head>
  <div class="element" style="background:#45230f">
      <p><input type="text" id="username" placeholder="enter username you want" style="width:200px" > </p>
      <p><button id="send_name"> Submit name</button></p>
      <p><input type="text" id="to" placeholder="sending to ?"></p>
      <p><input type="text" id="msg" placeholder="what's the message"></p>
      <button id="send_private">Send</button>
      <div class="w3-container" style="margin-top:20px; margin-left:20px; margin-right: 20px; margin-bottom:20px; background-color: #b3723b; color:black; border-radius:15px 15px 15px 15px; ">
        <textarea class="w3-input w3-padding" style="font-size:15px; background-color: #b3723b;" type="text" rows="3" id="result" placeholder="Message"></textarea>
      </div>
  </div>
      

   
</div>
        
    
</div>

<footer class="w3-center w3-light-grey w3-padding-32">
  <p><a href="https://www.BeanTherePodThat.ca" title="BeanTherePodThat" target="_blank" class="w3-hover-text-green">www.BeanTherePodThat.ca</a></p>
</footer>

</body>

</html>